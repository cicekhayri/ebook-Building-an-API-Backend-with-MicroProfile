<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<meta name="author" content="Hayri Cicek">
<title>Building an API Backend with MicroProfile</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Building an API Backend with MicroProfile</h1>
<div class="details">
<span id="author" class="author">Hayri Cicek</span><br>
<span id="email" class="email"><a href="mailto:hayri@kodnito.com">hayri@kodnito.com</a></span><br>
<span id="revnumber"> 1.0.1-SNAPSHOT,</span>
<span id="revdate">December 01, 2019</span>
<br><span id="revremark"></span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_contributors">1. Contributors</a></li>
<li><a href="#_this_book_is_for">2. This book is for</a></li>
<li><a href="#_what_you_need_for_this_book">3. What you need for this book</a></li>
<li><a href="#_what_is_microprofile">4. What Is MicroProfile?</a></li>
<li><a href="#_microprofile_implementations">5. MicroProfile Implementations</a></li>
<li><a href="#_getting_started">6. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_preparation">6.1. Preparation</a></li>
</ul>
</li>
<li><a href="#_bookstore">7. BookStore</a>
<ul class="sectlevel2">
<li><a href="#_generating_the_project">7.1. Generating the project</a></li>
<li><a href="#_payara_micro_config">7.2. Payara Micro Config</a></li>
<li><a href="#_entity">7.3. Entity</a></li>
<li><a href="#_business_logic">7.4. Business Logic</a></li>
<li><a href="#_summary">7.5. Summary</a></li>
</ul>
</li>
<li><a href="#_building_rest_apis_using_microprofile">8. Building REST APIs Using MicroProfile</a>
<ul class="sectlevel2">
<li><a href="#_summary_2">8.1. Summary</a></li>
</ul>
</li>
<li><a href="#_microprofile_metrics">9. MicroProfile Metrics</a>
<ul class="sectlevel2">
<li><a href="#_metered">9.1. <code>@Metered</code></a></li>
<li><a href="#_counted">9.2. <code>@Counted</code></a></li>
<li><a href="#_gauge">9.3. <code>@Gauge</code></a></li>
<li><a href="#_summary_3">9.4. Summary</a></li>
</ul>
</li>
<li><a href="#_microprofile_rest_client">10. MicroProfile Rest Client</a>
<ul class="sectlevel2">
<li><a href="#_summary_4">10.1. Summary</a></li>
</ul>
</li>
<li><a href="#_microprofile_config">11. MicroProfile Config</a>
<ul class="sectlevel2">
<li><a href="#_summary_5">11.1. Summary</a></li>
</ul>
</li>
<li><a href="#_microprofile_open_api">12. MicroProfile Open API</a>
<ul class="sectlevel2">
<li><a href="#_summary_6">12.1. Summary</a></li>
</ul>
</li>
<li><a href="#_microprofile_fault_tolerance">13. MicroProfile Fault Tolerance</a>
<ul class="sectlevel2">
<li><a href="#_summary_7">13.1. Summary</a></li>
</ul>
</li>
<li><a href="#_microprofile_health">14. MicroProfile Health</a>
<ul class="sectlevel2">
<li><a href="#_summary_8">14.1. Summary</a></li>
</ul>
</li>
<li><a href="#_microprofile_jwt">15. MicroProfile JWT</a>
<ul class="sectlevel2">
<li><a href="#_summary_9">15.1. Summary</a></li>
</ul>
</li>
<li><a href="#_microprofile_opentracing">16. MicroProfile OpenTracing</a>
<ul class="sectlevel2">
<li><a href="#_summary_10">16.1. Summary</a></li>
</ul>
</li>
<li><a href="#_eclipse_microprofile_starter">17. Eclipse MicroProfile Starter</a>
<ul class="sectlevel2">
<li><a href="#_summary_11">17.1. Summary</a></li>
</ul>
</li>
<li><a href="#_useful_links">18. Useful Links</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_contributors"><a class="anchor" href="#_contributors"></a>1. Contributors</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hayri Cicek</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://twitter.com/cicekhayri">@cicekhayri</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/cicekhayri"><strong>GitHub</strong></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.kodnito.com"><strong>Website</strong></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Phillip Krüger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://twitter.com/phillipkruger">@phillipkruger</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/phillip-kruger"><strong>GitHub</strong></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.phillip-kruger.com"><strong>Website</strong></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cesar Hernandez</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://twitter.com/CesarHgt">@CesarHgt</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/cesarhernandezgt"><strong>GitHub</strong></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://cesarhernandezgt.blogspot.com/"><strong>Website</strong></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amelia Eiras</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://twitter.com/ameliaeiras">@ameliaeiras</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/aeiras"><strong>GitHub</strong></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.tomitribe.com/"><strong>Website</strong></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Peggy Blevins</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/mblevins65"><strong>GitHub</strong></a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ondro Mihályi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://twitter.com/OndroMih">@OndroMih</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/OndroMih"><strong>GitHub</strong></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://ondro.inginea.eu/"><strong>Website</strong></a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rudy De Busscher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://twitter.com/rdebusscher">@rdebusscher</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/rdebusscher"><strong>GitHub</strong></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.atbash.be/"><strong>Website</strong></a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_this_book_is_for"><a class="anchor" href="#_this_book_is_for"></a>2. This book is for</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This book is for Java developers that want to quickly learn how to create a REST API using MicroProfile.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_you_need_for_this_book"><a class="anchor" href="#_what_you_need_for_this_book"></a>3. What you need for this book</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To try the code samples in this book you will need this.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK 8+</p>
</li>
<li>
<p>Maven</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_microprofile"><a class="anchor" href="#_what_is_microprofile"></a>4. What Is MicroProfile?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MicroProfile is an Open Source project hosted by Eclipse Foundation and is dedicated to optimize the Enterprise Java for microservice based architectures. The first release was in 2016.</p>
</div>
<div class="paragraph">
<p>MicroProfile consist of following specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Tracing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rest Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Config</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fault Tolerance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metrics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JWT Propagation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Health Check</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CDI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON-P</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JAX-RS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON-B</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_implementations"><a class="anchor" href="#_microprofile_implementations"></a>5. MicroProfile Implementations</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TomEE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://tomee.apache.org/" class="bare">http://tomee.apache.org/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Payara</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.payara.fish/" class="bare">https://www.payara.fish/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Liberty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openliberty.io/" class="bare">https://openliberty.io/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thorntail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://thorntail.io/" class="bare">https://thorntail.io/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">KumuluzEE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://ee.kumuluz.com/" class="bare">https://ee.kumuluz.com/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Helidon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://helidon.io" class="bare">https://helidon.io</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SmallRye</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.smallrye.io/" class="bare">https://www.smallrye.io/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hammock</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://hammock-project.github.io/" class="bare">https://hammock-project.github.io/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Launcher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/fujitsu/launcher" class="bare">https://github.com/fujitsu/launcher</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>6. Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_preparation"><a class="anchor" href="#_preparation"></a>6.1. Preparation</h3>
<div class="paragraph">
<p>Before you can start, you need to install JDK and Maven.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>JDK: Download the JDK from <a href="https://openjdk.java.net/install/index.html" class="bare">https://openjdk.java.net/install/index.html</a></p>
</li>
<li>
<p>Follow the instructions at <a href="https://maven.apache.org/download.cgi" class="bare">https://maven.apache.org/download.cgi</a> to install Maven.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bookstore"><a class="anchor" href="#_bookstore"></a>7. BookStore</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_generating_the_project"><a class="anchor" href="#_generating_the_project"></a>7.1. Generating the project</h3>
<div class="paragraph">
<p>We will use the Kodnito MicroProfile Archetype to generate our project.
Open your  terminal and type in the following command to generate our project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn archetype:generate -DarchetypeGroupId=com.kodnito -DarchetypeArtifactId=kodnito-microprofile-archetype -DarchetypeVersion=1.0.1 -DgroupId=com.kodnito.bookstore.rest -DartifactId=book-store -Dversion=1.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Type Enter and you will have your new project generated.
Now go to the project directory and type the following command for downloading the dependencies and when it’s done, open the project in your favourite IDE.
Open the pom.xml and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>com.h2database<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>h2<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>1.4.196<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;scope&gt;</span>runtime<span class="tag">&lt;/scope&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.eclipse.persistence<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>eclipselink<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>2.7.4<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>${jakarta.version}<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>

    <span class="tag">&lt;plugins&gt;</span>
        <span class="tag">&lt;plugin&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>fish.payara.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>payara-micro-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>1.0.1<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;configuration&gt;</span>
                <span class="tag">&lt;payaraVersion&gt;</span>${version.payara.micro}<span class="tag">&lt;/payaraVersion&gt;</span>
                <span class="tag">&lt;deployWar&gt;</span>true<span class="tag">&lt;/deployWar&gt;</span>
                <span class="tag">&lt;commandLineOptions&gt;</span>
                    <span class="tag">&lt;option&gt;</span>
                        <span class="tag">&lt;key&gt;</span>--autoBindHttp<span class="tag">&lt;/key&gt;</span>
                    <span class="tag">&lt;/option&gt;</span>
                <span class="tag">&lt;/commandLineOptions&gt;</span>
            <span class="tag">&lt;/configuration&gt;</span>
        <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Your pom.xml should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.kodnito.bookstore.rest<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>book-store<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
    <span class="tag">&lt;dependencies&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>jakarta.platform<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>jakarta.jakartaee-api<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${jakarta.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${microprofile.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>com.h2database<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>h2<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>1.4.196<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;scope&gt;</span>runtime<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.eclipse.persistence<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>eclipselink<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>2.7.4<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;/dependencies&gt;</span>
    <span class="tag">&lt;build&gt;</span>
        <span class="tag">&lt;finalName&gt;</span>restapi<span class="tag">&lt;/finalName&gt;</span>
        <span class="tag">&lt;plugins&gt;</span>
         <span class="tag">&lt;plugin&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>fish.payara.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>payara-micro-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;version&gt;</span>1.0.1<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;configuration&gt;</span>
                    <span class="tag">&lt;payaraVersion&gt;</span>${version.payara.micro}<span class="tag">&lt;/payaraVersion&gt;</span>
                    <span class="tag">&lt;deployWar&gt;</span>true<span class="tag">&lt;/deployWar&gt;</span>
                    <span class="tag">&lt;commandLineOptions&gt;</span>
                        <span class="tag">&lt;option&gt;</span>
                            <span class="tag">&lt;key&gt;</span>--autoBindHttp<span class="tag">&lt;/key&gt;</span>
                        <span class="tag">&lt;/option&gt;</span>
                    <span class="tag">&lt;/commandLineOptions&gt;</span>
                <span class="tag">&lt;/configuration&gt;</span>
            <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;/plugins&gt;</span>
    <span class="tag">&lt;/build&gt;</span>
    <span class="tag">&lt;properties&gt;</span>
        <span class="tag">&lt;maven.compiler.source&gt;</span>1.8<span class="tag">&lt;/maven.compiler.source&gt;</span>
        <span class="tag">&lt;maven.compiler.target&gt;</span>1.8<span class="tag">&lt;/maven.compiler.target&gt;</span>
        <span class="tag">&lt;failOnMissingWebXml&gt;</span>false<span class="tag">&lt;/failOnMissingWebXml&gt;</span>
        <span class="tag">&lt;version.payara.micro&gt;</span>5.193<span class="tag">&lt;/version.payara.micro&gt;</span>
        <span class="tag">&lt;jakarta.version&gt;</span>8.0.0<span class="tag">&lt;/jakarta.version&gt;</span>
        <span class="tag">&lt;microprofile.version&gt;</span>2.1<span class="tag">&lt;/microprofile.version&gt;</span>
    <span class="tag">&lt;/properties&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We added dependencies for H2 database, JPA , Payara Micro Maven runtime and javax transaction API.
Now open the terminal and navigate to the project directory and type the following command to download the dependencies :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn clean install</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_payara_micro_config"><a class="anchor" href="#_payara_micro_config"></a>7.2. Payara Micro Config</h3>
<div class="paragraph">
<p>Create a new directory called <code>WEB-INF</code> inside <code>src/main/webapp</code> and inside <code>WEB-INF</code> directory create the <code>glassfish-resources.xml</code> file and add the following to configure DataSource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="doctype">&lt;!DOCTYPE resources PUBLIC &quot;-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN&quot; &quot;http://glassfish.org/dtds/glassfish-resources_1_5.dtd&quot;&gt;</span>
<span class="tag">&lt;resources&gt;</span>
    <span class="tag">&lt;jdbc-resource</span>
            <span class="attribute-name">pool-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">H2Pool</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">jndi-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java:app/jdbc/restapi</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;jdbc-connection-pool</span>
            <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">H2Pool</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">res-type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.sql.DataSource</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">datasource-classname</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.h2.jdbcx.JdbcDataSource</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

        <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sa</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:h2:mem:restapiDB</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/jdbc-connection-pool&gt;</span>
<span class="tag">&lt;/resources&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We use the open source H2 database, which can be embedded in Java applications or run in the client mode.
It’s really easy to get started with H2 database, but I don’t think it’s a good idea to use it in production.
This config will create an in memory based database called <code>restapiDB</code>.
Now that we have our PayaraMicro DataSource configured it’s time to create our <code>persistence.xml</code> file.
Inside <code>src/main/resources</code> create the <code>persistence.xml</code> file and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;persistence</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/persistence</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;persistence-unit</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">restapi_PU</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">transaction-type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">JTA</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;provider&gt;</span>org.eclipse.persistence.jpa.PersistenceProvider<span class="tag">&lt;/provider&gt;</span>
        <span class="tag">&lt;jta-data-source&gt;</span>java:app/jdbc/restapi<span class="tag">&lt;/jta-data-source&gt;</span>
        <span class="tag">&lt;properties&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">eclipselink.ddl-generation</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">create-tables</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">eclipselink.ddl-generation.output-mode</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">database</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/properties&gt;</span>
    <span class="tag">&lt;/persistence-unit&gt;</span>
<span class="tag">&lt;/persistence&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>persistence.xml</code> is the standard configuration file for JPA and it has to be included in the <code>META-INF</code> directory.
The <code>persistence.xml</code> file defines what provider to be used, the name of the persistence unit, how classes should be mapped to database tables.
<code>eclipselink.ddl-generation</code> will create the database and tables.</p>
</div>
<div class="paragraph">
<p>Now that we have everything configured, it’s time to start working on our API.</p>
</div>
</div>
<div class="sect2">
<h3 id="_entity"><a class="anchor" href="#_entity"></a>7.3. Entity</h3>
<div class="paragraph">
<p>An Entity is a Java class that is marked with annotations that represent objects in a database.
Create a new file called Book.java inside com.kodnito.bookstore.entity and make it look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.kodnito.bookstore.entity</span>;

<span class="keyword">import</span> <span class="include">java.io.Serializable</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.GeneratedValue</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.GenerationType</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Id</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.NamedQueries</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.NamedQuery</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Table</span>;

<span class="annotation">@Entity</span>
<span class="annotation">@Table</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">books</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@NamedQueries</span>({
    <span class="annotation">@NamedQuery</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Book.findAll</span><span class="delimiter">&quot;</span></span>, query = <span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT b FROM Book b</span><span class="delimiter">&quot;</span></span>)
})
<span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> <span class="directive">implements</span> <span class="predefined-type">Serializable</span> {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="type">long</span> serialVersionUID = <span class="integer">1L</span>;

    <span class="annotation">@Id</span>
    <span class="annotation">@GeneratedValue</span>(strategy = GenerationType.AUTO)
    <span class="directive">private</span> <span class="predefined-type">Long</span> id;
    <span class="directive">private</span> <span class="predefined-type">String</span> title;
    <span class="directive">private</span> <span class="predefined-type">String</span> description;
    <span class="directive">private</span> <span class="predefined-type">String</span> isbn;
    <span class="directive">private</span> <span class="predefined-type">String</span> publisher;
    <span class="directive">private</span> <span class="predefined-type">String</span> language;
    <span class="directive">private</span> <span class="predefined-type">String</span> author;
    <span class="directive">private</span> <span class="type">float</span> price;
    <span class="directive">private</span> <span class="type">int</span> pages;

    <span class="directive">public</span> <span class="predefined-type">Long</span> getId() {
        <span class="keyword">return</span> id;
    }

    <span class="directive">public</span> <span class="type">void</span> setId(<span class="predefined-type">Long</span> id) {
        <span class="local-variable">this</span>.id = id;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getTitle() {
        <span class="keyword">return</span> title;
    }

    <span class="directive">public</span> <span class="type">void</span> setTitle(<span class="predefined-type">String</span> title) {
        <span class="local-variable">this</span>.title = title;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getDescription() {
        <span class="keyword">return</span> description;
    }

    <span class="directive">public</span> <span class="type">void</span> setDescription(<span class="predefined-type">String</span> description) {
        <span class="local-variable">this</span>.description = description;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getIsbn() {
        <span class="keyword">return</span> isbn;
    }

    <span class="directive">public</span> <span class="type">void</span> setIsbn(<span class="predefined-type">String</span> isbn) {
        <span class="local-variable">this</span>.isbn = isbn;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getPublisher() {
        <span class="keyword">return</span> publisher;
    }

    <span class="directive">public</span> <span class="type">void</span> setPublisher(<span class="predefined-type">String</span> publisher) {
        <span class="local-variable">this</span>.publisher = publisher;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getLanguage() {
        <span class="keyword">return</span> language;
    }

    <span class="directive">public</span> <span class="type">void</span> setLanguage(<span class="predefined-type">String</span> language) {
        <span class="local-variable">this</span>.language = language;
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">long</span> getSerialVersionUID() {
        <span class="keyword">return</span> serialVersionUID;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getAuthor() {
        <span class="keyword">return</span> author;
    }

    <span class="directive">public</span> <span class="type">float</span> getPrice() {
        <span class="keyword">return</span> price;
    }

    <span class="directive">public</span> <span class="type">void</span> setPrice(<span class="type">float</span> price) {
        <span class="local-variable">this</span>.price = price;
    }

    <span class="directive">public</span> <span class="type">int</span> getPages() {
        <span class="keyword">return</span> pages;
    }

    <span class="directive">public</span> <span class="type">void</span> setPages(<span class="type">int</span> pages) {
        <span class="local-variable">this</span>.pages = pages;
    }

}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Entity</code> annotation indicates that it is a JPA entity</p>
</li>
<li>
<p><code>@Table</code> annotation is used to name the table in the database</p>
</li>
<li>
<p><code>@NamedQueries</code> annotation is used to add multiple queries</p>
</li>
<li>
<p><code>@NamedQuery</code> annotation defines query with a name</p>
</li>
<li>
<p><code>@Id</code> annotation is used to define the primary key and the Id property is also annotated with <code>@GeneratedValue</code> to indicate that the Id should be generated automatically.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_business_logic"><a class="anchor" href="#_business_logic"></a>7.4. Business Logic</h3>
<div class="paragraph">
<p>It’s time to concentrate on the business logic code. It’s always best to separate the code that each class does its own job. We will now create the BookService.java file for interacting with the database.                                                                                                                         Now create the BookService.java file inside com.kodnito.bookstore.service package and make it look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.kodnito.bookstore.service</span>;

<span class="keyword">import</span> <span class="include">com.kodnito.bookstore.entity.Book</span>;
<span class="keyword">import</span> <span class="include">java.util.ArrayList</span>;
<span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="keyword">import</span> <span class="include">javax.enterprise.context.ApplicationScoped</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.EntityManager</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.PersistenceContext</span>;
<span class="keyword">import</span> <span class="include">javax.transaction.Transactional</span>;

<span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BookService</span> {

    <span class="annotation">@PersistenceContext</span>(unitName = <span class="string"><span class="delimiter">&quot;</span><span class="content">restapi_PU</span><span class="delimiter">&quot;</span></span>)
    EntityManager em;

    <span class="directive">public</span> <span class="predefined-type">List</span> getAll() {
        <span class="predefined-type">List</span>&lt;<span class="predefined-type">Book</span>&gt; books = em.createNamedQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">Book.findAll</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Book</span>.class).getResultList();
        <span class="keyword">return</span> books != <span class="predefined-constant">null</span> ? books : <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
    }

    <span class="directive">public</span> <span class="predefined-type">Book</span> findById(<span class="predefined-type">Long</span> id) {
        <span class="keyword">return</span> em.find(<span class="predefined-type">Book</span>.class, id);
    }

    <span class="annotation">@Transactional</span>
    <span class="directive">public</span> <span class="type">void</span> update(<span class="predefined-type">Book</span> book) {
        em.merge(book);
    }

    <span class="annotation">@Transactional</span>
    <span class="directive">public</span> <span class="type">void</span> create(<span class="predefined-type">Book</span> book) {
        em.persist(book);
    }
    <span class="annotation">@Transactional</span>
    <span class="directive">public</span> <span class="type">void</span> delete(<span class="predefined-type">Book</span> book) {
        <span class="keyword">if</span> (!em.contains(book)) {
            book = em.merge(book);
        }
        em.remove(book);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What does everything mean in this file, we start at the beginning of the file with the <code>@ApplicationScoped</code> annotation.
When an object is annotated with the <code>@ApplicationScoped</code> annotation, it is created once for the duration of the application.
<code>@PersistenceContext</code> annotation injects the EntityManager to be used at runtime. We have created five methods to interact with the database.
getAll method will get all the objects from the books table, when we want a single object we will use the findById method with an id.
Update method like it says will update an existing object, create method will create a new Book object and delete will delete an existing Book object from the database.
The <code>@Transactional</code> annotation provides the application the ability to control the transaction boundaries.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary"><a class="anchor" href="#_summary"></a>7.5. Summary</h3>
<div class="paragraph">
<p>In this chapter, we created our application from maven archetype, added the dependencies we need for our application, configured our application, created entities classes and created our business logic code for interacting with the database.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_rest_apis_using_microprofile"><a class="anchor" href="#_building_rest_apis_using_microprofile"></a>8. Building REST APIs Using MicroProfile</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST stands for representational state transfer and is a software architecture style for creating web services.
The primary used HTTP verbs are GET, POST, PUT, PATCH and DELETE.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get a list of resources or a single resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a new resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update/Replace an existing resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update/Modify an existing resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete an existing resource</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Now how should we define URIs for our book store application:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/restapi/books" class="bare">http://localhost:8080/restapi/books</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a list of all Books</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/restapi/books/1" class="bare">http://localhost:8080/restapi/books/1</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return the Book whose ID is 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/restapi/books" class="bare">http://localhost:8080/restapi/books</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a new Book resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/restapi/books/1" class="bare">http://localhost:8080/restapi/books/1</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the Book whose ID is 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/restapi/books/1" class="bare">http://localhost:8080/restapi/books/1</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete the Book whose ID is 1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Now that we have defined the book store URIs, it’s time to start coding.
Create a new file called <code>BookStoreEndpoint.java</code> inside <code>com.kodnito.bookstore.rest</code>.
We start creating the GET methods, open the <code>BookStoreEndpoint.java</code> file and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.kodnito.bookstore.rest</span>;

<span class="keyword">import</span> <span class="include">com.kodnito.bookstore.entity.Book</span>;
<span class="keyword">import</span> <span class="include">com.kodnito.bookstore.service.BookService</span>;
<span class="keyword">import</span> <span class="include">javax.enterprise.context.RequestScoped</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Consumes</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.GET</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.POST</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Path</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Produces</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.core.MediaType</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.core.Response</span>;


<span class="annotation">@RequestScoped</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">books</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="annotation">@Consumes</span>(MediaType.APPLICATION_JSON)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BookStoreEndpoint</span> {

    <span class="annotation">@Inject</span>
    BookService bookService;

    <span class="annotation">@GET</span>
    <span class="directive">public</span> Response getAll() {
        <span class="keyword">return</span> Response.ok(bookService.getAll()).build();
    }

    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{id}</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> Response getBook(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Long</span> id) {
        <span class="predefined-type">Book</span> book = bookService.findById(id);

        <span class="keyword">return</span> Response.ok(book).build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We start with the annotations we have added, the <code>@RequestScoped</code> annotation indicates that this class will be created once every request.
<code>@Path</code> annotation identifies the URI path to which the resource responds.
<code>@Produces</code> annotation will automatically convert the response to JSON format and <code>@Consumes</code> annotation will automatically convert the posted JSON string here to Book object.
We inject the BookService with the <code>@Inject</code> annotation. We annotated the getAll method with <code>@GET</code> annotation, which maps /books HTTP GET request to the method and will retrieve all the books from the database and return the entire list.
Parameters are accessed with the <code>@PathParam</code> annotation.</p>
</div>
<div class="paragraph">
<p>Next, we will create the POST method, add the following to the BookStoreEndpoint.java:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@POST</span>
<span class="directive">public</span> Response create(<span class="predefined-type">Book</span> book) {
    bookService.create(book);
    <span class="keyword">return</span> Response.ok().build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The create method is annotated with the <code>@POST</code> annotation, which indicates that HTTP POST request are mapped to this method.
Now that we have GET and POST methods done we can test that our application works.
Open the terminal and navigate to the project directory and type the following command to start our application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn clean package payara-micro:start</code></pre>
</div>
</div>
<div class="paragraph">
<p>We start with the GET method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8080/restapi/books</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because we don’t have any objects in the database, we will only get an empty list.</p>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">[]%</code></pre>
</div>
</div>
<div class="paragraph">
<p>Time to create Book objects in the database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -X POST -H &quot;Content-Type:application/json&quot; \
  --data '{&quot;title&quot;:&quot;This is my test book&quot;,&quot;description&quot;:&quot;this is my book description&quot;,
            &quot;isbn&quot;: &quot;12xxxxxxxx&quot;, &quot;publisher&quot;: &quot;None Yet&quot;, &quot;language&quot;:&quot;English&quot;,&quot;author&quot;:&quot;Hayri Cicek&quot;,
             &quot;price&quot;: &quot;0.00&quot;,&quot;pages&quot;:&quot;0&quot;}' http://localhost:8080/restapi/books</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">HTTP/1.1 200 OK
Server: Payara Micro #badassfish
Content-Length: 0
X-Frame-Options: SAMEORIGIN</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have created one book object, we can go back and try the GET method again to see that we get the book object from the database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8080/restapi/books</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">HTTP/1.1 200 OK
Server: Payara Micro #badassfish
Content-Type: application/json
Content-Length: 171
X-Frame-Options: SAMEORIGIN

[{&quot;description&quot;:&quot;this is my book description&quot;,&quot;id&quot;:1,&quot;isbn&quot;:&quot;12xxxxxxxx&quot;,&quot;language&quot;:&quot;English&quot;,&quot;pages&quot;:0,&quot;price&quot;:0.0,&quot;publisher&quot;:&quot;None Yet&quot;,&quot;title&quot;:&quot;This is my test book&quot;}]%</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, we have a list with one object returned to us from the database. Create another one and try to get a single object back.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -X POST -H &quot;Content-Type:application/json&quot; \
  --data '{&quot;title&quot;:&quot;This is my second test book&quot;,&quot;description&quot;:&quot;this is my second book description&quot;,
            &quot;isbn&quot;: &quot;13xxxxxxxx&quot;, &quot;publisher&quot;: &quot;None Yet&quot;, &quot;language&quot;:&quot;English&quot;,&quot;author&quot;:&quot;Hayri Cicek&quot;,
             &quot;price&quot;: &quot;0.00&quot;,&quot;pages&quot;:&quot;0&quot;}' http://localhost:8080/restapi/books</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8080/restapi/books/2</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">HTTP/1.1 200 OK
Server: Payara Micro #badassfish
Content-Type: application/json
Content-Length: 183
X-Frame-Options: SAMEORIGIN

{&quot;description&quot;:&quot;this is my second book description&quot;,&quot;id&quot;:2,&quot;isbn&quot;:&quot;13xxxxxxxx&quot;,&quot;language&quot;:&quot;English&quot;,&quot;pages&quot;:0,&quot;price&quot;:0.0,&quot;publisher&quot;:&quot;None Yet&quot;,&quot;title&quot;:&quot;This is my second test book&quot;}%</code></pre>
</div>
</div>
<div class="paragraph">
<p>The GET and POST methods seems to work and it’s time to create the rest of the methods, PUT and DELETE.
Open BookStoreEndpoint and add the following for updating an existing object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@PUT</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{id}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> Response update(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Long</span> id, <span class="predefined-type">Book</span> book) {
    <span class="predefined-type">Book</span> updateBook = bookService.findById(id);

    updateBook.setIsbn(book.getIsbn());
    updateBook.setDescription(book.getDescription());
    updateBook.setLanguage(book.getLanguage());
    updateBook.setPages(book.getPages());
    updateBook.setPrice(book.getPrice());
    updateBook.setPublisher(book.getPublisher());
    updateBook.setTitle(book.getTitle());

    bookService.update(updateBook);

    <span class="keyword">return</span> Response.ok().build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we annotate the update method with <code>@PUT</code> annotation, which maps HTTP PUT verb request to this method and the method takes two parameters, id and Book object.
Next is to add the Delete method to the API, open BookStoreEndpoint.java and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DELETE</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{id}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> Response delete(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Long</span> id) {
    <span class="predefined-type">Book</span> getBook = bookService.findById(id);
    bookService.delete(getBook);
    <span class="keyword">return</span> Response.ok().build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we annotate the delete method with <code>@DELETE</code> annotation, which maps HTTP DELETE verb request to this method.
We pass an id to this method, which finds and deletes the Book objects whose id match.
Now in the terminal, if you haven&#8217;t quit the Payara Micro server, then quit by Ctrl+c and start again using the same mvn clean package payara-micro:start command.</p>
</div>
<div class="paragraph">
<p>Open another terminal window and try both the Update and Delete functions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -H 'Content-Type: application/json' -X PUT \
-d '{&quot;title&quot;:&quot;This is my second test book updated&quot;,&quot;description&quot;:&quot;this is my second book description updated&quot;,
            &quot;isbn&quot;: &quot;13xxxxxxxx&quot;, &quot;publisher&quot;: &quot;None Yet&quot;, &quot;language&quot;:&quot;English&quot;,&quot;author&quot;:&quot;Hayri Cicek&quot;,
             &quot;price&quot;: &quot;1.00&quot;,&quot;pages&quot;:&quot;0&quot;}' http://localhost:8080/restapi/books/2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8080/restapi/books/2</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">HTTP/1.1 200 OK
Server: Payara Micro #badassfish
Content-Type: application/json
Content-Length: 199
X-Frame-Options: SAMEORIGIN

{&quot;description&quot;:&quot;this is my second book description updated&quot;,&quot;id&quot;:2,&quot;isbn&quot;:&quot;13xxxxxxxx&quot;,&quot;language&quot;:&quot;English&quot;,&quot;pages&quot;:0,&quot;price&quot;:1.0,&quot;publisher&quot;:&quot;None Yet&quot;,&quot;title&quot;:&quot;This is my second test book updated&quot;}%</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, I will update the Book with id 2 and if you don’t have Book object with id 2 then take one that you have in your database, now if you get all objects again you will see that the object is updated.
Next is to try the DELETE method, open a new terminal tab and use the command below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X DELETE http://localhost:8080/restapi/books/2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now when you get the book list again, the book object is deleted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8080/restapi/books</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">HTTP/1.1 200 OK
Server: Payara Micro #badassfish
Content-Type: application/json
Content-Length: 171
X-Frame-Options: SAMEORIGIN

[{&quot;description&quot;:&quot;this is my book description&quot;,&quot;id&quot;:1,&quot;isbn&quot;:&quot;12xxxxxxxx&quot;,&quot;language&quot;:&quot;English&quot;,&quot;pages&quot;:0,&quot;price&quot;:0.0,&quot;publisher&quot;:&quot;None Yet&quot;,&quot;title&quot;:&quot;This is my test book&quot;}]%</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_summary_2"><a class="anchor" href="#_summary_2"></a>8.1. Summary</h3>
<div class="paragraph">
<p>In this chapter we learned how to create a REST API using MicroProfile and curl to test our API.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_metrics"><a class="anchor" href="#_microprofile_metrics"></a>9. MicroProfile Metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When we build micro services or web applications, we need to monitor our application that it’s running, have memory or disk space and for that we have MicroProfile Metrics which is very easy to get started with and use.
Open the BookStoreEndpoint.java file and make the getAll method to look like this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Timed</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">getAllBooks</span><span class="delimiter">&quot;</span></span>,
            description = <span class="string"><span class="delimiter">&quot;</span><span class="content">Monitor the time getAll Method takes</span><span class="delimiter">&quot;</span></span>,
            unit = MetricUnits.MILLISECONDS,
            absolute = <span class="predefined-constant">true</span>)
<span class="annotation">@GET</span>
<span class="directive">public</span> Response getAll() {
        <span class="keyword">return</span> Response.ok(bookService.getAll()).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Timed</code> annotation will monitor how long the process takes.
The metadata fields on <code>@Timed</code> annotation are optional, but we have added a few, name field is the name of the metric, the description is used to describe the metric, unit sets the unit of the metric and absolute is used to determine if the name specified in the name field is the exact name.
Now Kill the Payara Micro server and start it again using the command <code>mvn clean package payara-micro:start</code> and first navigate to the <a href="http://localhost:8080/restapi/books" class="bare">http://localhost:8080/restapi/books</a>, because we need to time it and see how long the process will take, now open another tab and go to <a href="http://localhost:8080/metrics/application" class="bare">http://localhost:8080/metrics/application</a> and voila you have some metrics.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/all-metrics.png" alt="All Metrics" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>Here we have a list of metrics and if we want a single metric then we could use the name we specified in the name field and navigate to <a href="http://localhost:8080/metrics/application/get-all-books" class="bare">http://localhost:8080/metrics/application/get-all-books</a>.</p>
</div>
<div class="sect2">
<h3 id="_metered"><a class="anchor" href="#_metered"></a>9.1. <code>@Metered</code></h3>
<div class="paragraph">
<p><code>@Metered</code> annotation will monitor the rate events occurred. The meta fields are optional, but it makes life easy if we add some data to the meta fields. Change the create method to look like this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Metered</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">create-books</span><span class="delimiter">&quot;</span></span>,
            unit = MetricUnits.MILLISECONDS,
            description = <span class="string"><span class="delimiter">&quot;</span><span class="content">Monitor the rate events occured</span><span class="delimiter">&quot;</span></span>,
            absolute = <span class="predefined-constant">true</span>)
<span class="annotation">@POST</span>
<span class="directive">public</span> Response create(<span class="predefined-type">Book</span> book) {
        bookService.create(book);
        <span class="keyword">return</span> Response.ok().build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Like the <code>@Timed</code> annotation, we have name, unit, description and absolute, which is almost identical.</p>
</div>
</div>
<div class="sect2">
<h3 id="_counted"><a class="anchor" href="#_counted"></a>9.2. <code>@Counted</code></h3>
<div class="paragraph">
<p><code>@Counted</code> annotation will monitor how many times a method gets invoked, and the <code>@Counted</code> annotation have a few meta fields and are optional. Update the getBook method to look like this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Counted</span>(unit = MetricUnits.NONE,
            name = <span class="string"><span class="delimiter">&quot;</span><span class="content">getBook</span><span class="delimiter">&quot;</span></span>,
            absolute = <span class="predefined-constant">true</span>,
            monotonic = <span class="predefined-constant">true</span>,
            displayName = <span class="string"><span class="delimiter">&quot;</span><span class="content">get single book</span><span class="delimiter">&quot;</span></span>,
            description = <span class="string"><span class="delimiter">&quot;</span><span class="content">Monitor how many times getBook method was called</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@GET</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{id}</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> Response getBook(<span class="annotation">@PathParam</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">Long</span> id) {
        <span class="predefined-type">Book</span> book = bookService.findById(id);

        <span class="keyword">return</span> Response.ok(book).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, like the other metrics, we have name, absolute, monotonic, displayName and description, the table below shows what everything is for:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sets the unit of the metric.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">absolute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">is used to determine if the name specified in the name field is the exact name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">monotonic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">is set to true, which means the counter increases monotonically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">displayName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the display name of the counter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">describe the metric</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_gauge"><a class="anchor" href="#_gauge"></a>9.3. <code>@Gauge</code></h3>
<div class="paragraph">
<p><code>@Gauge</code> annotation is used to return just a value
The metadata fields on @Counted annotation are optional</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/get-int-value</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Gauge</span>(unit = MetricUnits.NONE, name = <span class="string"><span class="delimiter">&quot;</span><span class="content">intValue</span><span class="delimiter">&quot;</span></span>, absolute = <span class="predefined-constant">true</span>)
<span class="directive">public</span> <span class="type">int</span> getIntValue() {
        <span class="keyword">return</span> <span class="integer">3</span>;
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sets the unit of the metric.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the name of the gauge.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">absolute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">is used to determine if the name specified in the name field is the exact name.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Start the application server and go to <a href="http://localhost:8080/metrics/application" class="bare">http://localhost:8080/metrics/application</a>, you should see all your metrics.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_3"><a class="anchor" href="#_summary_3"></a>9.4. Summary</h3>
<div class="paragraph">
<p>In this chapter, we learned how to add MicroProfile Metrics to our application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_rest_client"><a class="anchor" href="#_microprofile_rest_client"></a>10. MicroProfile Rest Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With MicroProfile Rest Client we can invoke RESTful services over HTTP, and in this tutorial we will create another service, which will call our Book Store application. Open a new terminal window and create a new MicroProfile Maven project using Kodnito MicroProfile Archetype, using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn archetype:generate -DarchetypeGroupId=com.kodnito
-DarchetypeArtifactId=kodnito-microprofile-archetype -DarchetypeVersion=1.0.1 -DgroupId=com.kodnito.bookstore.rest -DartifactId=book-store-client -Dversion=1.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>We should have 2 projects now. Now cd into book-store-client application and type mvn clean install to download and install dependencies. Open book-store-client application in your IDE and add the following dependencies to the pom.xml:
In the build section add the TomEE Maven runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;plugins&gt;</span>
    <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.tomee.maven<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>tomee-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>${tomee.version}<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;configuration&gt;</span>
            <span class="tag">&lt;tomeeVersion&gt;</span>${tomee.version}<span class="tag">&lt;/tomeeVersion&gt;</span>
            <span class="tag">&lt;tomeeClassifier&gt;</span>microprofile<span class="tag">&lt;/tomeeClassifier&gt;</span>
        <span class="tag">&lt;/configuration&gt;</span>
    <span class="tag">&lt;/plugin&gt;</span>
<span class="tag">&lt;/plugins&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And in the properties section add the version for the TomEE:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;tomee.version&gt;</span>8.0.0<span class="tag">&lt;/tomee.version&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Your pom.xml should look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.kodnito.bookstore.rest<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>book-store-client<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;packaging&gt;</span>war<span class="tag">&lt;/packaging&gt;</span>
    <span class="tag">&lt;dependencies&gt;</span>
        <span class="tag">&lt;dependency&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>org.eclipse.microprofile<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>microprofile<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>2.0.1<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
            <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;/dependencies&gt;</span>
    <span class="tag">&lt;build&gt;</span>
        <span class="tag">&lt;finalName&gt;</span>restapi<span class="tag">&lt;/finalName&gt;</span>
        <span class="tag">&lt;plugins&gt;</span>
            <span class="tag">&lt;plugin&gt;</span>
                <span class="tag">&lt;groupId&gt;</span>org.apache.tomee.maven<span class="tag">&lt;/groupId&gt;</span>
                <span class="tag">&lt;artifactId&gt;</span>tomee-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
                <span class="tag">&lt;version&gt;</span>${tomee.version}<span class="tag">&lt;/version&gt;</span>
                <span class="tag">&lt;configuration&gt;</span>
                    <span class="tag">&lt;tomeeVersion&gt;</span>${tomee.version}<span class="tag">&lt;/tomeeVersion&gt;</span>
                    <span class="tag">&lt;tomeeClassifier&gt;</span>microprofile<span class="tag">&lt;/tomeeClassifier&gt;</span>
                <span class="tag">&lt;/configuration&gt;</span>
            <span class="tag">&lt;/plugin&gt;</span>
        <span class="tag">&lt;/plugins&gt;</span>
    <span class="tag">&lt;/build&gt;</span>
    <span class="tag">&lt;properties&gt;</span>
        <span class="tag">&lt;tomee.version&gt;</span>8.0.0<span class="tag">&lt;/tomee.version&gt;</span>
        <span class="tag">&lt;maven.compiler.source&gt;</span>1.8<span class="tag">&lt;/maven.compiler.source&gt;</span>
        <span class="tag">&lt;maven.compiler.target&gt;</span>1.8<span class="tag">&lt;/maven.compiler.target&gt;</span>
        <span class="tag">&lt;failOnMissingWebXml&gt;</span>false<span class="tag">&lt;/failOnMissingWebXml&gt;</span>
    <span class="tag">&lt;/properties&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now in the terminal type <code>mvn clean install</code> to download dependencies. It’s time to code our book-store-client service which we&#8217;ll call our book-store.
Inside <code>com.kodnito.bookstore.response</code> package create a new file called <code>BookResponse.java</code> and add the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.kodnito.bookstore.response</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">BookResponse</span> {

    <span class="directive">private</span> <span class="predefined-type">Long</span> id;
    <span class="directive">private</span> <span class="predefined-type">String</span> title;
    <span class="directive">private</span> <span class="predefined-type">String</span> description;
    <span class="directive">private</span> <span class="predefined-type">String</span> isbn;
    <span class="directive">private</span> <span class="predefined-type">String</span> publisher;
    <span class="directive">private</span> <span class="predefined-type">String</span> language;
    <span class="directive">private</span> <span class="predefined-type">String</span> author;
    <span class="directive">private</span> <span class="type">float</span> price;
    <span class="directive">private</span> <span class="type">int</span> pages;

    <span class="directive">public</span> <span class="predefined-type">Long</span> getId() {
        <span class="keyword">return</span> id;
    }

    <span class="directive">public</span> <span class="type">void</span> setId(<span class="predefined-type">Long</span> id) {
        <span class="local-variable">this</span>.id = id;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getTitle() {
        <span class="keyword">return</span> title;
    }

    <span class="directive">public</span> <span class="type">void</span> setTitle(<span class="predefined-type">String</span> title) {
        <span class="local-variable">this</span>.title = title;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getDescription() {
        <span class="keyword">return</span> description;
    }

    <span class="directive">public</span> <span class="type">void</span> setDescription(<span class="predefined-type">String</span> description) {
        <span class="local-variable">this</span>.description = description;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getIsbn() {
        <span class="keyword">return</span> isbn;
    }

    <span class="directive">public</span> <span class="type">void</span> setIsbn(<span class="predefined-type">String</span> isbn) {
        <span class="local-variable">this</span>.isbn = isbn;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getPublisher() {
        <span class="keyword">return</span> publisher;
    }

    <span class="directive">public</span> <span class="type">void</span> setPublisher(<span class="predefined-type">String</span> publisher) {
        <span class="local-variable">this</span>.publisher = publisher;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getLanguage() {
        <span class="keyword">return</span> language;
    }

    <span class="directive">public</span> <span class="type">void</span> setLanguage(<span class="predefined-type">String</span> language) {
        <span class="local-variable">this</span>.language = language;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getAuthor() {
        <span class="keyword">return</span> author;
    }

    <span class="directive">public</span> <span class="type">void</span> setAuthor(<span class="predefined-type">String</span> author) {
        <span class="local-variable">this</span>.author = author;
    }

    <span class="directive">public</span> <span class="type">float</span> getPrice() {
        <span class="keyword">return</span> price;
    }

    <span class="directive">public</span> <span class="type">void</span> setPrice(<span class="type">float</span> price) {
        <span class="local-variable">this</span>.price = price;
    }

    <span class="directive">public</span> <span class="type">int</span> getPages() {
        <span class="keyword">return</span> pages;
    }

    <span class="directive">public</span> <span class="type">void</span> setPages(<span class="type">int</span> pages) {
        <span class="local-variable">this</span>.pages = pages;
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response from BookStore service will be mapped using this class.
We will create two more files, create a new interface called <code>BookStoreService.java</code> inside <code>com.kodnito.bookstore.service</code> and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.kodnito.bookstore.service</span>;

<span class="keyword">import</span> <span class="include">com.kodnito.bookstore.response.BookResponse</span>;
<span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="keyword">import</span> <span class="include">javax.enterprise.context.Dependent</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.GET</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Path</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Produces</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.core.MediaType</span>;
<span class="keyword">import</span> <span class="include">org.eclipse.microprofile.rest.client.inject.RegisterRestClient</span>;

<span class="annotation">@Dependent</span>
<span class="annotation">@RegisterRestClient</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">books</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">BookStoreService</span> {

    <span class="annotation">@GET</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;BookResponse&gt; getAll();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we create an interface with method(s) that represent RESTful APIs endpoint, and we can use this interface to invoke, the remote service.
Using <code>@Dependent</code> and <code>@RegisterRestClient</code> on the interface, will make that this interface will be mapped by the CDI.
Next thing to do is to create a new resource that will use this interface and invoke our book-store service.
Inside <code>com.kodnito.bookstore.rest</code> package create <code>BookStoreEndpoint.java</code> file and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.kodnito.bookstore.rest</span>;

<span class="keyword">import</span> <span class="include">java.net.MalformedURLException</span>;
<span class="keyword">import</span> <span class="include">java.net.URL</span>;
<span class="keyword">import</span> <span class="include">javax.enterprise.context.ApplicationScoped</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.GET</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Path</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.Produces</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.core.MediaType</span>;
<span class="keyword">import</span> <span class="include">org.eclipse.microprofile.rest.client.RestClientBuilder</span>;
<span class="keyword">import</span> <span class="include">com.kodnito.bookstore.service.BookStoreService</span>;
<span class="keyword">import</span> <span class="include">javax.ws.rs.core.Response</span>;

<span class="annotation">@ApplicationScoped</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BookStoreEndpoint</span> {

    <span class="annotation">@Inject</span>
    <span class="annotation">@RestClient</span>
    <span class="directive">private</span> BookStoreService bookStoreService;

    <span class="annotation">@GET</span>
    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
    <span class="directive">public</span> Response books() <span class="directive">throws</span> <span class="exception">MalformedURLException</span> {
        <span class="keyword">return</span> Response.ok(bookStoreService.getAll()).build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is almost identical to the one we have in our book-store application, when we invoke this endpoint on the book-store-client service, it will call the book-store service and retrieve all the books.
Before we start the service, we need to add URL to the service we call to the <code>microprofile-config.properties</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">com.kodnito.bookstore.service.BookStoreService/mp-rest/url=http://localhost:8080/restapi</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now open a new terminal tab and start the <code>book-store</code> service first and when the service is up, navigate to the directory where you have the <code>book-store-client</code> application and start the application using <code>mvn clean package tomee:run -Dtomee-plugin.http=8081</code> and now open your browser and go to
<a href="http://localhost:8081/restapi/books" class="bare">http://localhost:8081/restapi/books</a>, and we can see that our services talks to each other.</p>
</div>
<div class="sect2">
<h3 id="_summary_4"><a class="anchor" href="#_summary_4"></a>10.1. Summary</h3>
<div class="paragraph">
<p>In this chapter, we learned how use MicroProfile Rest Client in our application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_config"><a class="anchor" href="#_microprofile_config"></a>11. MicroProfile Config</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MicroProfile Config API can be used to retrieve configuration information from different sources.</p>
</div>
<div class="paragraph">
<p>When we generated our Maven project we got an empty <code>microprofile-config.properties</code> file created in the <code>src/main/resources</code> package.
MicroProfile Config files are created in this package as default.
We will now add new properties and make our application read the properties from our config file.
Open <code>microprofile-config.properties</code> file and add the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">username=root
password=secret
microprofile.apis={&quot;config&quot;, &quot;cdi&quot;, &quot;jax-rs&quot;, &quot;json-p&quot;, &quot;fault tolerance&quot;, &quot;healt check&quot;, &quot;jwt auth&quot;, &quot;metrics&quot;, &quot;openapi&quot;, &quot;opentracing&quot;,&quot;rest client&quot;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now open the <code>BookStoreEndpoint.java</code> and make it look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BookStoreEndpoint</span> {

    <span class="annotation">@Inject</span>
    <span class="annotation">@ConfigProperty</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, defaultValue=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="predefined-type">String</span> username;

    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">mp-config</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
    <span class="directive">public</span> Response mpConfig() {
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; configProperties = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;&gt;();

        configProperties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, username);

        <span class="keyword">return</span> Response.ok(configProperties).build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Inject</code> <code>@ConfigProperty</code> is used for injecting a single configuration property.
We could also use <code>@Inject</code> <code>Config</code> and use <code>getValue</code> to retrieve configuration properties like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ApplicationScoped</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">BookStoreEndpoint</span> {

    <span class="annotation">@Inject</span>
    <span class="annotation">@ConfigProperty</span>(name=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, defaultValue=<span class="string"><span class="delimiter">&quot;</span><span class="content">admin</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="predefined-type">String</span> username;

    <span class="annotation">@Inject</span>
    Config config;

    <span class="annotation">@GET</span>
    <span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">mp-config</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
    <span class="directive">public</span> Response mpConfig() {
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; configProperties = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;&gt;();

        configProperties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, username);
        configProperties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, config.getValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span>.class));
        configProperties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">microprofile-apis</span><span class="delimiter">&quot;</span></span>, config.getValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">microprofile.apis</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span><span class="type">[]</span>.class));

        <span class="keyword">return</span> Response.ok(configProperties).build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start the <code>BookStoreClient</code> service if not already started and type the following in a new terminal window:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8081/restapi/books/mp-config</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">{&quot;password&quot;:&quot;secret&quot;,&quot;microprofile-apis&quot;:[&quot;{\&quot;config\&quot;&quot;,&quot;\&quot;cdi\&quot;&quot;,&quot;\&quot;jax-rs\&quot;&quot;,&quot;\&quot;json-p\&quot;&quot;,&quot;\&quot;fault tolerance\&quot;&quot;,&quot;\&quot;healt check\&quot;&quot;,&quot;\&quot;jwt auth\&quot;&quot;,&quot;\&quot;metrics\&quot;&quot;,&quot;\&quot;openapi\&quot;&quot;,&quot;\&quot;opentracing\&quot;&quot;,&quot;\&quot;rest client\&quot;}&quot;],&quot;username&quot;:&quot;root&quot;}%</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_summary_5"><a class="anchor" href="#_summary_5"></a>11.1. Summary</h3>
<div class="paragraph">
<p>In this chapter, we learned how to use MicroProfile Config API.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_open_api"><a class="anchor" href="#_microprofile_open_api"></a>12. MicroProfile Open API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter, we will learn how to document our RESTful APIs.
MicroProfile OpenAPI defines interfaces to produce OpenAPI documentation from JAX-RS applications.
We will add documentation to our <code>book-store</code> service application.
Inside <code>src/main/resources/META-INF</code> create the <code>openapi.yaml</code> file and add the following :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">openapi</span>: <span class="string"><span class="content">3.0.0</span></span>
<span class="key">info</span>:
  <span class="key">title</span>: <span class="string"><span class="content">This is my Book Store application API Title</span></span>
  <span class="key">description</span>: <span class="string"><span class="content">This is my Book Store application description</span></span>
  <span class="key">license</span>:
    <span class="key">name</span>: <span class="string"><span class="content">Eclipse Public License - v 1.0</span></span>
    <span class="key">url</span>: <span class="string"><span class="content">https://www.eclipse.org/legal/epl-v10.html</span></span>
  <span class="key">version</span>: <span class="string"><span class="content">1.0.0</span></span>
<span class="key">servers</span>:
- <span class="string"><span class="content">url: http://localhost:8080</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is our configuration for our API documentation, here we add title, description and license if we want.
Restart the <code>book-store</code> application and go to <a href="http://localhost:8080/openapi" class="bare">http://localhost:8080/openapi</a>, and you will see your RESTful API documentation generated, it doesn’t say much about the endpoint and we can add more to the generated documentation.
Open <code>BookStoreEndpoint.java</code> and make the <code>getAll()</code> method to look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@APIResponses</span>(
        value = {
            <span class="annotation">@APIResponse</span>(
                    responseCode = <span class="string"><span class="delimiter">&quot;</span><span class="content">404</span><span class="delimiter">&quot;</span></span>,
                    description = <span class="string"><span class="delimiter">&quot;</span><span class="content">We could not find anything</span><span class="delimiter">&quot;</span></span>,
                    content = <span class="annotation">@Content</span>(mediaType = <span class="string"><span class="delimiter">&quot;</span><span class="content">text/plain</span><span class="delimiter">&quot;</span></span>))
            ,
    <span class="annotation">@APIResponse</span>(
                    responseCode = <span class="string"><span class="delimiter">&quot;</span><span class="content">200</span><span class="delimiter">&quot;</span></span>,
                    description = <span class="string"><span class="delimiter">&quot;</span><span class="content">We have a list of books</span><span class="delimiter">&quot;</span></span>,
                    content = <span class="annotation">@Content</span>(mediaType = <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>,
                            schema = <span class="annotation">@Schema</span>(implementation = <span class="predefined-type">Properties</span>.class)))})
<span class="annotation">@Operation</span>(summary = <span class="string"><span class="delimiter">&quot;</span><span class="content">Outputs a list of books</span><span class="delimiter">&quot;</span></span>,
        description = <span class="string"><span class="delimiter">&quot;</span><span class="content">This method outputs a list of books</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Timed</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">get-all-books</span><span class="delimiter">&quot;</span></span>,
        description = <span class="string"><span class="delimiter">&quot;</span><span class="content">Monitor the time getAll Method takes</span><span class="delimiter">&quot;</span></span>,
        unit = MetricUnits.MILLISECONDS,
        absolute = <span class="predefined-constant">true</span>)
<span class="annotation">@GET</span>
<span class="directive">public</span> Response getAll() {
    <span class="keyword">return</span> Response.ok(bookService.getAll()).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Restart the <code>book-store</code> service and refresh the <a href="http://localhost:8080/openapi" class="bare">http://localhost:8080/openapi</a> endpoint and see the new generated OpenAPI documentation.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/bookstore-openapi.png" alt="Bookstore OpenAPI" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p><code>@APIResponses</code> annotation describes multiple responses
<code>@APIResponse</code> annotation describes a single response
<code>@Operation</code> annotation describes a single operation on a path
<code>@Parameter</code> annotation describes a single operation parameter</p>
</div>
<div class="paragraph">
<p><a href="https://www.phillip-kruger.com"><strong>Phillip Krüger</strong></a> have an excellent blog post on how to add Swagger UI to your OpenAPI documentation.
<a href="https://www.phillip-kruger.com/post/microprofile_openapi_swaggerui/" class="bare">https://www.phillip-kruger.com/post/microprofile_openapi_swaggerui/</a></p>
</div>
<div class="sect2">
<h3 id="_summary_6"><a class="anchor" href="#_summary_6"></a>12.1. Summary</h3>
<div class="paragraph">
<p>In this chapter, we learned how to document our RESTful APIs using MicroProfile OpenAPI.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_fault_tolerance"><a class="anchor" href="#_microprofile_fault_tolerance"></a>13. MicroProfile Fault Tolerance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With MicroProfile Fault Tolerance, we can build services which will work even when something failed.
<code>@Timeout</code> annotation is used to avoid waiting forever for the response.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Timeout</span>(<span class="integer">0</span>)
<span class="annotation">@GET</span>
<span class="directive">public</span> Response getAll() {
    <span class="keyword">return</span> Response.ok(bookService.getAll()).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Fallback</code> annotation is used when something went wrong with the call then it will still operate without throwing an exception.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Timeout</span>(<span class="integer">0</span>)
<span class="annotation">@Fallback</span>(fallbackMethod = <span class="string"><span class="delimiter">&quot;</span><span class="content">getAllFallbackMethod</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@GET</span>
<span class="directive">public</span> Response getAll() {
    <span class="keyword">return</span> Response.ok(bookService.getAll()).build();
}

<span class="directive">public</span> Response getAllFallbackMethod() {
    <span class="keyword">return</span> Response.ok(Stream.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">Book One</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Book Two</span><span class="delimiter">&quot;</span></span>).collect(toList())).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Retry</code> annotation is used to repeat the call when something failed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Retry</span>(maxRetries = <span class="integer">3</span>, delay = <span class="integer">300</span>)
<span class="annotation">@GET</span>
<span class="directive">public</span> Response getAll() {
    <span class="keyword">return</span> Response.ok(bookService.getAll()).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With <code>@Bulkhead</code> annotation you can limit the number of concurrent requests that are made to the method</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="annotation">@Bulkhead</span>(<span class="integer">10</span>)
<span class="directive">public</span> Response getAll() {
    <span class="keyword">return</span> Response.ok(bookService.getAll()).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@CircuitBreaker</code> annotation is used to immediately interrupt the call if the called services previously failed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="annotation">@CircuitBreaker</span>(delay = <span class="integer">2000</span>, requestVolumeThreshold = <span class="integer">2</span>, failureRatio=<span class="float">0.65</span>, successThreshold = <span class="integer">3</span>)
<span class="directive">public</span> Response getAll() {
    <span class="keyword">return</span> Response.ok(bookService.getAll()).build();
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_summary_7"><a class="anchor" href="#_summary_7"></a>13.1. Summary</h3>
<div class="paragraph">
<p>In this chapter, we learned how to use MicroProfile Fault Tolerance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_health"><a class="anchor" href="#_microprofile_health"></a>14. MicroProfile Health</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Health checks are used to determine if service is running, shutdown, lack of disk space or maybe issues with the database connection.
Because we added all the MicroProfile dependencies in our services, we have an endpoint called <code>/health</code> by default and if we visit that
endpoint it will show us <code>UP</code> indicating that the service is up and running.
We can add custom health checks if we want. In your terminal windows, start the <code>BookStoreClient</code> service if not already running and
type the following to invoke the <code>/health</code> endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8081/restapi/health</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">{&quot;checks&quot;:[],&quot;outcome&quot;:&quot;UP&quot;,&quot;status&quot;:&quot;UP&quot;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a new file called <code>BookStoreClientHealthCheck.java</code> inside <code>com.kodnito.bookstore.rest</code> package and make it look like the following</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.kodnito.bookstore.rest</span>;

<span class="keyword">import</span> <span class="include">javax.enterprise.context.ApplicationScoped</span>;
<span class="keyword">import</span> <span class="include">org.eclipse.microprofile.health.Health</span>;
<span class="keyword">import</span> <span class="include">org.eclipse.microprofile.health.HealthCheck</span>;
<span class="keyword">import</span> <span class="include">org.eclipse.microprofile.health.HealthCheckResponse</span>;

<span class="annotation">@Health</span>
<span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BookStoreClientHealthCheck</span> <span class="directive">implements</span> HealthCheck {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> HealthCheckResponse call() {
        <span class="keyword">return</span> HealthCheckResponse.
                named(<span class="string"><span class="delimiter">&quot;</span><span class="content">diskspace</span><span class="delimiter">&quot;</span></span>).
                up().
                withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">free</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">900MB</span><span class="delimiter">&quot;</span></span>).
                build();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Beans annotated with <code>@Health</code> and paired with <code>@ApplicationScoped</code> are discovered automatically.
We implement the <code>HealthCheck</code> interface, and we override the <code>call()</code> method.
Restart the <code>BookStoreClient</code> service and invoke the <code>/health</code> endpoint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8081/restapi/health</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">{&quot;checks&quot;:[{&quot;data&quot;:{&quot;free&quot;:&quot;900MB&quot;},&quot;name&quot;:&quot;diskspace&quot;,&quot;state&quot;:&quot;UP&quot;}],&quot;outcome&quot;:&quot;UP&quot;,&quot;status&quot;:&quot;UP&quot;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have our data in the checks list. We are not limited with hardcoded data, this is for test purpose only.
We could add a check for database connection, disk space, or we could invoke <code>BookStore</code> service and check if the service is
in maintenance or the service is down.
Add the following property to the <code>microprofile-config.properties</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">bookservice.url=http://localhost:8080/restapi</code></pre>
</div>
</div>
<div class="paragraph">
<p>And now update the <code>BookStoreClientHealthCheck.java</code> to look like the following</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Health</span>
<span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BookStoreClientHealthCheck</span> <span class="directive">implements</span> HealthCheck {

    <span class="annotation">@Inject</span>
    <span class="annotation">@ConfigProperty</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">bookservice.url</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="predefined-type">String</span> bookServiceUrl;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> HealthCheckResponse call() {

        <span class="type">boolean</span> isHealthy = <span class="predefined-constant">false</span>;

        <span class="keyword">try</span> {
            Client client = ClientBuilder.newClient();
            Response response = client.target(bookServiceUrl).request(MediaType.APPLICATION_JSON)
                    .get();
            <span class="keyword">if</span> (response.getStatus() != <span class="integer">200</span>) {
                isHealthy = <span class="predefined-constant">false</span>;
            }
            isHealthy = <span class="predefined-constant">true</span>;
        } <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
            isHealthy = <span class="predefined-constant">false</span>;
        }

        <span class="keyword">if</span> (!isHealthy) {
            <span class="keyword">return</span> HealthCheckResponse.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">bookservice</span><span class="delimiter">&quot;</span></span>)
                    .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">service</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">not available</span><span class="delimiter">&quot;</span></span>)
                    .down().build();
        }

        <span class="keyword">return</span> HealthCheckResponse.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">bookservice</span><span class="delimiter">&quot;</span></span>)
                .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">service</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">available</span><span class="delimiter">&quot;</span></span>)
                .up().build();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we inject the <code>bookservice.url</code> property, and then we invoke the <code>BookStore</code> service.
We check the response code we get back and if it&#8217;s not 200 (<code>OK</code>) then we return <code>service not available</code>.
Kill the <code>BookService</code> and start the <code>BookServiceClient</code>, if it&#8217;s not already started.
In your terminal window type the following to invoke the <code>/health</code> endpoint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8081/restapi/health</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">{&quot;checks&quot;:[{&quot;data&quot;:{&quot;service&quot;:&quot;not available&quot;},&quot;name&quot;:&quot;bookservice&quot;,&quot;state&quot;:&quot;DOWN&quot;}],&quot;outcome&quot;:&quot;DOWN&quot;,&quot;status&quot;:&quot;DOWN&quot;}%</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, because we stopped the <code>BookService</code>, we see that <code>service is not available</code> and the status is <code>DOWN</code>, if we start the
<code>BookService</code> and invoke the <code>/health</code> again then we see that the output shows that the service is available and status is <code>UP</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8081/restapi/health</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">{&quot;checks&quot;:[{&quot;data&quot;:{&quot;service&quot;:&quot;available&quot;},&quot;name&quot;:&quot;bookservice&quot;,&quot;state&quot;:&quot;UP&quot;}],&quot;outcome&quot;:&quot;UP&quot;,&quot;status&quot;:&quot;UP&quot;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of how to check database connection health:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Log</span>
<span class="annotation">@Health</span>
<span class="annotation">@ApplicationScoped</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MembershipHealthCheck</span> <span class="directive">implements</span> HealthCheck {

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> <span class="predefined-type">DataSource</span> datasource;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> HealthCheckResponse call() {

        HealthCheckResponseBuilder responseBuilder = HealthCheckResponse.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">membership</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">try</span> {
            <span class="predefined-type">Connection</span> connection = datasource.getConnection();
            <span class="type">boolean</span> isValid = connection.isValid(timeout);

            <span class="predefined-type">DatabaseMetaData</span> metaData = connection.getMetaData();

            responseBuilder = responseBuilder
                    .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">databaseProductName</span><span class="delimiter">&quot;</span></span>, metaData.getDatabaseProductName())
                    .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">databaseProductVersion</span><span class="delimiter">&quot;</span></span>, metaData.getDatabaseProductVersion())
                    .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">driverName</span><span class="delimiter">&quot;</span></span>, metaData.getDriverName())
                    .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">driverVersion</span><span class="delimiter">&quot;</span></span>, metaData.getDriverVersion())
                    .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">isValid</span><span class="delimiter">&quot;</span></span>, isValid);

            <span class="keyword">return</span> responseBuilder.state(isValid).build();


        } <span class="keyword">catch</span>(<span class="exception">SQLException</span>  e) {
            log.log(<span class="predefined-type">Level</span>.SEVERE, <span class="predefined-constant">null</span>, e);
            responseBuilder = responseBuilder
                    .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">exceptionMessage</span><span class="delimiter">&quot;</span></span>, e.getMessage());
            <span class="keyword">return</span> responseBuilder.down().build();
        }
    }

    <span class="annotation">@Inject</span> <span class="annotation">@ConfigProperty</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">health.membership.dbtimeout</span><span class="delimiter">&quot;</span></span>, defaultValue = <span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">private</span> <span class="type">int</span> timeout;


}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Example</code></p>
</div>
<div class="paragraph">
<p>Phillip Krüger, <a href="https://github.com/phillip-kruger/microprofile-demo/blob/master/membership/src/main/java/com/github/phillipkruger/membership/health/MembershipHealthCheck.java"><strong>GitHub</strong></a></p>
</div>
<div class="paragraph">
<p><code>Example</code></p>
</div>
<div class="paragraph">
<p>Example to check free memory</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> HealthCheckResponse call() {
    <span class="keyword">return</span> HealthCheckResponse
            .named(<span class="string"><span class="delimiter">&quot;</span><span class="content">book-store-client</span><span class="delimiter">&quot;</span></span>)
            .state(<span class="predefined-constant">true</span>)
            .withData(<span class="string"><span class="delimiter">&quot;</span><span class="content">memory</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Runtime</span>.getRuntime().freeMemory())
            .build();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -i -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://localhost:8081/restapi/health</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Output</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">{&quot;checks&quot;:[{&quot;data&quot;:{&quot;memory&quot;:129470808},&quot;name&quot;:&quot;book-store-client&quot;,&quot;state&quot;:&quot;UP&quot;}],&quot;outcome&quot;:&quot;UP&quot;,&quot;status&quot;:&quot;UP&quot;}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_summary_8"><a class="anchor" href="#_summary_8"></a>14.1. Summary</h3>
<div class="paragraph">
<p>In this chapter, we learned how to use MicroProfile Health in our application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_jwt"><a class="anchor" href="#_microprofile_jwt"></a>15. MicroProfile JWT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter, we will learn how to secure our services using MicroProfile JWT and Keycloak.
Go to <a href="https://www.keycloak.org/downloads.html" class="bare">https://www.keycloak.org/downloads.html</a> and download latest Standalone server distribution.
Unzip the zip file and open a new terminal window and navigate to the keycloak folder.
Now type the following command to start the Keycloak server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./bin/standalone.sh -Djboss.http.port=8084</code></pre>
</div>
</div>
<div class="paragraph">
<p>First thing we will do is to create a new user,
open your browser and navigate to <a href="http://localhost:8084/auth/" class="bare">http://localhost:8084/auth/</a> and create a new user with admin access.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/keycloak_create_admin_user.png" alt="Keycloak Create Admin User" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>Now go to <a href="http://localhost:8084/auth/admin/" class="bare">http://localhost:8084/auth/admin/</a> and login with the newly created user.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/keycloak_login_page.png" alt="Keycloak Login" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>Click on Select Realm and click on Add Realm and create a new realm called public.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/keycloak_create_public_realm.png" alt="Keycloak Create Realm" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>Now click on <code>Client</code> and create a new client called <code>book-store-client</code>, which we will use in our services.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/keycloak-create-client.png" alt="Keycloak Client" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>Now, we need to create another user which will be used by our services.
Click on <code>Users</code> and create a new user called <code>book-store-client-user</code>.
Update the Email, First Name and Last Name fields and click Save.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/Keycloak-user-details.png" alt="Keycloak User Details" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>Now click on <code>Credentials</code> and create a new password and click on Reset password, now we are done with the Keycloak setup for
the user we will use.</p>
</div>
<div class="paragraph">
<p>Before we implement security in our services, we need to configure Keycloak.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on <code>Groups</code> and create a new group called <code>mysimpleservice</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/keycloak-create-my-simple-group.png" alt="Keycloak Client" width="500" height="500"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on <code>Users</code> and find the <code>book-store-client-user</code> and click on <code>Group</code> and click on the <code>mysimpleservice</code> and click <code>join</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/keycloak-user-map-group.png" alt="Keycloak Client" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>It&#8217;s time to implement Keycloak authentication in our services.</p>
</div>
<div class="paragraph">
<p>Open <code>microprofile-config.properties</code> in <code>book-store-client</code> and add the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">mp.jwt.verify.publickey.location=/META-INF/keycloak-public-key.pem
mp.jwt.verify.issuer=http://localhost:8084/auth/realms/public</code></pre>
</div>
</div>
<div class="paragraph">
<p>And create a new file called <code>keycloak-public-key.pem</code> inside <code>src/main/resources/META-INF</code> and store the public key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmDmSR9FxmQdjy7lLColVAILD3Gxj8uV5O9PS32CbVNKC1pTh/LvUUigCq5SVVyLb8Ctw4wcC+Ax/AK0GgN76P6bEy9C3k22AqV8TZ7P41oPUSf7OhKBDHpPT2KBz/7tcNTaWHaJQu29ZnlIzqds+0EotjMAQCBU/wz/DwWesM0L/6nN99/mTtYm2ODoFBAyJkLH0x0wyaHPiFTWz+jxUsHYEEPaSFncsWrOY3M+x8AmeI63Wo8D6qTkgvDhjVq/zFTg2E0vb3d86X8sb1nYqLR4aInzQq+qzMFhUZQT9j/rgeLKdmneL8gYSiF4Yt0nPWBTygmwizYOU/86Db6cGawIDAQAB
-----END PUBLIC KEY-----</code></pre>
</div>
</div>
<div class="paragraph">
<p>You find the public key here <a href="http://localhost:8084/auth/realms/public/" class="bare">http://localhost:8084/auth/realms/public/</a></p>
</div>
<div class="paragraph">
<p>Now open the <code>ApplicationConfig.java</code> in <code>book-store-client</code> application and make it look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@LoginConfig</span>(authMethod = <span class="string"><span class="delimiter">&quot;</span><span class="content">MP-JWT</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@ApplicationPath</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@DeclareRoles</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">mysimplerole</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">ADMIN</span><span class="delimiter">&quot;</span></span>})
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationConfig</span> <span class="directive">extends</span> Application {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@LoginConfig</code> annotation describe what associated realm name will be used in the application.<br>
<code>@DeclareRoles</code> annotation is used to declare security roles.<br></p>
</div>
<div class="paragraph">
<p>Now open the <code>BookStoreEndpoint.java</code> file and add <code>@RolesAllowed("mysimplerole")</code> to the <code>mpConfig()</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="annotation">@Path</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">mp-config</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="annotation">@RolesAllowed</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">mysimplerole</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> Response mpConfig() {
    <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; configProperties = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;&gt;();

    configProperties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, username);
    configProperties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, config.getValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span>.class));
    configProperties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">microprofile-apis</span><span class="delimiter">&quot;</span></span>, config.getValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">microprofile.apis</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span><span class="type">[]</span>.class));

    <span class="keyword">return</span> Response.ok(configProperties).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@RolesAllowed</code> annotation is used to declare security roles and specifies a list of roles to access methods in the application.</p>
</div>
<div class="paragraph">
<p>Download <a href="https://twitter.com/cicekhayri">Postman</a>, if you don&#8217;t already have it installed.
We will now invoke the Keycloak auth token endpoint to retrieve the access token to use in our service.
Open Postman and add the following to retrieve access token.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/postman-keycloak-token-endpoint.png" alt="Keycloak Client" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>POST: <a href="http://localhost:8084/auth/realms/public/protocol/openid-connect/token" class="bare">http://localhost:8084/auth/realms/public/protocol/openid-connect/token</a><br>
realm: public<br>
grant_type: password<br>
client_id: book-store-client<br>
username: the_username_of_the_user<br>
password: the_password_of_the_user<br>
client_secret: the book store client secret<br>
You find this in the <code>Credentials</code> menu.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/keycloak-client-secret.png" alt="Keycloak Client Secret" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>Now click on <code>Send</code> and you will retrieve access token. Copy the access token and open a new Postman tab.
Now, make a <code>GET</code> request to <code><a href="http://localhost:8081/restapi/books/mp-config" class="bare">http://localhost:8081/restapi/books/mp-config</a></code>, if you don&#8217;t send the request with access token,
you will get <code>401 Unauthorized</code>.<br>
In <code>Type</code> dropdown menu, choose <code>Bearer Token</code> and paste the token in <code>Token</code> field.<br>
Now click on <code>Send</code> again and you will now get <code>200 OK</code>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/postman-auth-200-OK.png" alt="Keycloak Client" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>And that&#8217;s it, we have secured our <code>/mp-config</code> endpoint.</p>
</div>
<div class="sect2">
<h3 id="_summary_9"><a class="anchor" href="#_summary_9"></a>15.1. Summary</h3>
<div class="paragraph">
<p>In this chapter, we learned how to add MicroProfile JWT security to our service.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microprofile_opentracing"><a class="anchor" href="#_microprofile_opentracing"></a>16. MicroProfile OpenTracing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenTracing is a standardized API that allows developers to instrument their own services for distributed tracing.
With distributed tracing, you can troubleshoot your services by logging the requests.</p>
</div>
<div class="paragraph">
<p><code>@Traced</code> annotation specify a class or method to be traced and has two arguments, which are optional.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defaults to true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">operationName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the span, default is ""</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@GET</span>
<span class="annotation">@Produces</span>(MediaType.APPLICATION_JSON)
<span class="annotation">@Traced</span>(operationName = <span class="string"><span class="delimiter">&quot;</span><span class="content">booksOperation</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> Response books() <span class="directive">throws</span> <span class="exception">MalformedURLException</span> {
    <span class="keyword">return</span> Response.ok(bookStoreService.getAll()).build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can use tracing tools like Zipkin or Jaeger to monitor and troubleshoot latency problems in distributed systems.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zipkin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://zipkin.apache.org/" class="bare">https://zipkin.apache.org/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaeger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.jaegertracing.io/" class="bare">https://www.jaegertracing.io/</a></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_summary_10"><a class="anchor" href="#_summary_10"></a>16.1. Summary</h3>
<div class="paragraph">
<p>In this chapter, we learned how to troubleshoot services using MicroProfile OpenTracing.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_eclipse_microprofile_starter"><a class="anchor" href="#_eclipse_microprofile_starter"></a>17. Eclipse MicroProfile Starter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We used the Kodnito MicroProfile Archetype to generate our projects, but there is a new way and it&#8217;s to use the new Eclipse MicroProfile Starter.
Go to <a href="https://start.microprofile.io" class="bare">https://start.microprofile.io</a> and follow the steps below to generate your new application.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/eclipse-microprofile-starter.png" alt="All Metrics" width="500" height="500"></span></p>
</div>
<div class="paragraph">
<p>groupId: com.kodnito<br>
artifactId: my_new_hello_world_service<br>
MicroProfile Version: MP 2.1<br>
MicroProfile Server: Choose server<br>
Choose Beans Discovery Mode<br>
In Examples for specifications section, choose what examples you want to be generated.</p>
</div>
<div class="paragraph">
<p>That&#8217;s it, now click Download button and your new project will be downloaded.<br>
Unzip the zip file and open your terminal and go to the directory where the project is.<br>
Depends on which server you choose, use one of the following commands to start the application.</p>
</div>
<div class="paragraph">
<p><code>Open Liberty</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"> mvn clean package &amp;&amp; java -jar target/hello_microprofile_world.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Thorntail</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"> mvn clean package &amp;&amp; java -jar target/hello_microprofile_world-thorntail.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Payara</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"> mvn clean package &amp;&amp; java -jar target/hello_microprofile_world-microbundle.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Apache TomEE</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"> mvn clean package &amp;&amp; java -jar target/hello_microprofile_world-exec.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>KumuluzEE</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"> mvn clean package &amp;&amp; java -jar target/hello_microprofile_world.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will find the test page at <a href="http://localhost:8080/index.html" class="bare">http://localhost:8080/index.html</a></p>
</div>
<div class="sect2">
<h3 id="_summary_11"><a class="anchor" href="#_summary_11"></a>17.1. Summary</h3>
<div class="paragraph">
<p>In this chapter we learned how to use Eclipse MicroProfile Starter.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_useful_links"><a class="anchor" href="#_useful_links"></a>18. Useful Links</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MicroProfile Starter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://start.microprofile.io/" class="bare">https://start.microprofile.io/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MicroProfile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://microprofile.io" class="bare">https://microprofile.io</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TomEE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://tomee.apache.org/" class="bare">http://tomee.apache.org/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Payara</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://payara.fish" class="bare">https://payara.fish</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tomitribe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://tomitribe.com" class="bare">https://tomitribe.com</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thorntail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://thorntail.io" class="bare">https://thorntail.io</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Helidon</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://helidon.io" class="bare">https://helidon.io</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">KumuluzEE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://ee.kumuluz.com/" class="bare">https://ee.kumuluz.com/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Liberty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openliberty.io" class="bare">https://openliberty.io</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eclipse Foundation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.eclipse.org/" class="bare">https://www.eclipse.org/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenJDK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://openjdk.java.net/" class="bare">https://openjdk.java.net/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://maven.apache.org/" class="bare">http://maven.apache.org/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NetBeans</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://netbeans.apache.org/" class="bare">http://netbeans.apache.org/</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
 1.0.1-SNAPSHOT<br>
Last updated 2019-12-01 13:24:33 UTC
</div>
</div>
</body>
</html>